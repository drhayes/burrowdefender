<!DOCTYPE HTML>
<html>
	<head>
		<title>TileManager</title>
		<script type="text/javascript" src="../lib/jquery/jquery-1.4.2.min.js"></script>
		<script type="text/javascript" src="qunit.js"></script>
		<script type="text/javascript" src="../src/tile.js"></script>
		<script type="text/javascript" src="../src/tilemanager.js"></script>
		<link rel="stylesheet" href="qunit.css" media="screen" title="no title">
		<script type="text/javascript" charset="utf-8">
			$(document).ready(function() {
				module('basics');

				test('ctor', function() {
					ok(typeof(TileManager) !== 'undefined', 'TileManager ctor exists');
					var tm = new TileManager();
					ok(tm, 'should get object back');
					ok(tm.tilemap, 'should have a tilemap');
					// prove that it starts out empty somehow
					var x = 0;
					for (prop in tm.tilemap) {
						x++;
					}
					ok(x === 0, 'the tilemap should be empty');
				});
				
				module('usage', {
					'setup': function() {
						this.tm = new TileManager();
					}
				});
				
				test('makekey', function() {
					ok(typeof(this.tm.makekey) == 'function', 'makekey is a function');
					ok(this.tm.makekey(3, 4) === '3:4', '3,4 becomes the key "3:4"');
					ok(this.tm.makekey(-2, 4) === '-2:4', '-2,4 becomes the key "-2:4"');
				});
				
				test('get and set', function() {
					ok(typeof(this.tm.get) == 'function', 'get is a function');
					ok(typeof(this.tm.set) == 'function', 'set is a function');
					ok(this.tm.get(0, 0) === Tile.AirTile, '0,0 has an AirTile');
					ok(this.tm.get(3, -2) === Tile.AirTile, 'gee, looks like it is all AirTiles');
				});
			});
		</script>
	</head>
	<body>
		<h1 id="qunit-header">TileManager Test</h1>
 		<h2 id="qunit-banner"></h2>
 		<h2 id="qunit-userAgent"></h2>
 		<ol id="qunit-tests"></ol>
 		<div id="qunit-fixture">test markup, will be hidden</div>
	</body>
</html>